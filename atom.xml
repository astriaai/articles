<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://www.astria.ai/astria-articles/</id>
    <title>Astria articles Blog</title>
    <updated>2024-02-04T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://www.astria.ai/astria-articles/"/>
    <subtitle>Astria articles Blog</subtitle>
    <icon>https://www.astria.ai/astria-articles/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[How to Use Astria.ai's Multi-Pass Inference for Highly Controlled Stable Diffusion Image Generation]]></title>
        <id>https://www.astria.ai/astria-articles/2024/02/04/multi-pass-inference</id>
        <link href="https://www.astria.ai/astria-articles/2024/02/04/multi-pass-inference"/>
        <updated>2024-02-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[How to Generate Striking Images with Astria.ai's Multi-Pass Inference]]></summary>
        <content type="html"><![CDATA[<p>Welcome to Astria.ai.</p><p>In our first blog post, we’ll take a deep dive into how you can generate very detailed images using a multi-pass inference method. We’ll show you how to structure high-quality prompts to generate visuals of professional quality.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-multi-pass-inference">What Is Multi-Pass Inference?<a href="#what-is-multi-pass-inference" class="hash-link" aria-label="Direct link to What Is Multi-Pass Inference?" title="Direct link to What Is Multi-Pass Inference?">​</a></h2><p>First, let’s discuss what multi-pass inference is. Multi-pass inference is essentially a technique where you can generate the background of the composition independently from the foreground. On Astria.ai this control is achieved through multiple breaks in the prompting technique. The base image (i.e. the background elements) is generated separately via the first part of the prompt. Then using the next breaks in the prompt the subject is in-painted onto the base image.</p><p>Here's how multi-pass inference enhances control over the background of an image:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-iterative-refinement">1. Iterative Refinement<a href="#1-iterative-refinement" class="hash-link" aria-label="Direct link to 1. Iterative Refinement" title="Direct link to 1. Iterative Refinement">​</a></h3><p>In a multi-pass inference, you have the opportunity to adjust and refine the background in a separate pass. This iterative process allows you to steer the image generation towards your desired outcome.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-choice-over-base-model">2. Choice over base model<a href="#2-choice-over-base-model" class="hash-link" aria-label="Direct link to 2. Choice over base model" title="Direct link to 2. Choice over base model">​</a></h3><p>Multi-pass inference allows for choice over the base model thereby giving the users the option to use a variety of pre-trained models like Realistic Vision, Absolute Reality, and other Stable Diffusion models.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-increased-precision-and-detailing">3. Increased Precision and Detailing<a href="#3-increased-precision-and-detailing" class="hash-link" aria-label="Direct link to 3. Increased Precision and Detailing" title="Direct link to 3. Increased Precision and Detailing">​</a></h3><p>With multiple inference steps, you have more chances to introduce specific details or adjustments to the background. This can include changing its color scheme, adding or removing elements, or altering its overall style. Such precision is often not achievable in a single pass, where the model's output is more dependent on the initial prompt and less on a multi-step method.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-balancing-foreground-and-background">4. Balancing Foreground and Background<a href="#4-balancing-foreground-and-background" class="hash-link" aria-label="Direct link to 4. Balancing Foreground and Background" title="Direct link to 4. Balancing Foreground and Background">​</a></h3><p>Multi-pass inference allows for a more balanced composition between the foreground and the background so that you can modify the background in a way that it complements the foreground elements more effectively.</p><p>As an example take a look at these two images of a man wearing sportswear and posing inside a gym. The first one was generated in a single prompt, while for the second one we used a multi-pass approach.</p><center> (without multi-pass) </center><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image7-93a3f8e6eb0be8b0e45d06ff58a44e71.png" width="1599" height="1999" class="img_ev3q"></p><center> (with multi-pass) </center><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image6-75d8f7c291788629a5e79224da37059c.png" width="1280" height="1600" class="img_ev3q"></p><p>As you can see in the second image the background has more character to it. The elements of the gym are more prominent as compared to the former.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-multi-pass-inference-can-benefit-your-business">How Multi-Pass Inference Can Benefit Your Business<a href="#how-multi-pass-inference-can-benefit-your-business" class="hash-link" aria-label="Direct link to How Multi-Pass Inference Can Benefit Your Business" title="Direct link to How Multi-Pass Inference Can Benefit Your Business">​</a></h2><p>The enhanced control over image backgrounds provided by multi-pass inference offers significant benefits for businesses in various domains. By precisely tailoring image backgrounds, companies can maintain a consistent visual brand identity, crucial for marketing, advertising, and establishing a strong social media presence.</p><p>For e-commerce and retail sectors, the background of product images plays a critical role in shaping customer perception. Tailoring these backgrounds to complement the products not only enhances their appeal but also provides clearer context, which can lead to increased sales.</p><p>Moreover, multi-pass inference enables rapid and cost-effective creation of high-quality, bespoke images. This reduces the reliance on expensive photoshoots and graphic design work, presenting a more economical approach to content creation. Businesses can easily modify image backgrounds to suit various platforms and formats, such as social media, websites, and print media, ensuring optimal visual presentation across all channels.</p><p>Lastly, in a digital landscape overflowing with visual content, unique and tailored images with custom backgrounds provide businesses with a competitive edge. Such visuals are more likely to capture audience interest in a crowded market, standing out from standard, generic content. Therefore, the ability to control image backgrounds through multi-pass inference is not just a technical advantage but a strategic tool for branding, marketing, product presentation, and creating visually compelling content that differentiates a business in the market.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-astriaai-makes-multi-pass-inferencing-easy">How Astria.ai makes Multi-pass inferencing easy<a href="#how-astriaai-makes-multi-pass-inferencing-easy" class="hash-link" aria-label="Direct link to How Astria.ai makes Multi-pass inferencing easy" title="Direct link to How Astria.ai makes Multi-pass inferencing easy">​</a></h2><p>Multi-pass inferencing, particularly in the context of advanced generative models like Stable Diffusion, often requires a developer's expertise due to several technical complexities. At Astria.ai, we provide a user-friendly apis that can significantly simplify this process for users who do not possess extensive technical know-how.</p><p>Let’s first understand how a developer’s expertise is needed and then we’ll show how Astria.ai makes this process easier.</p><p>If one were to fine-tune and implement Stable Diffusion for multi-pass inferencing one would need a fair understanding of how these machine learning models work so that they can adjust parameters for different passes. This would require a fair amount of coding skills especially for customizing the inference process, integrating different components (like schedulers, encoders, decoders), and handling data preprocessing and postprocessing. Developers must be proficient in relevant programming languages and frameworks.</p><p>Moreover each pass in multi-pass inferencing may require adjustments to optimize the output. Developers need to troubleshoot issues, fine-tune parameters, and experiment with different configurations to achieve the desired results, which demands both technical skills and problem-solving abilities. Lastly, generative models can be resource-intensive. Developers need to manage and optimize the use of computational resources like GPUs, especially when working with large models or high-resolution images.</p><p>Astria.ai simplifies the above procedures by providing simple APIs that abstract the complexities of the underlying model. The platform also comes with pre-configured settings and templates showcased in the gallery that users can select from, reducing the time to do prompt engineering, and helping understand the breadth of options available. This includes predefined prompts, styles, and optimization settings. Apart from this Astria also handles the computational resource management in the background, allowing users to focus on the creative aspects of image generation without worrying about technical constraints.</p><p>Overall, while multi-pass inferencing with AI models requires considerable technical expertise due to its complexity, a platform like Astria.ai democratizes this capability by providing easy-to-use api and automated workflows, making advanced image generation accessible to developers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-guide-to-creating-images-for-a-sportswear-brand-using-multi-pass-inferencing">Step-by-Step Guide to Creating Images for a Sportswear Brand Using Multi-Pass Inferencing<a href="#step-by-step-guide-to-creating-images-for-a-sportswear-brand-using-multi-pass-inferencing" class="hash-link" aria-label="Direct link to Step-by-Step Guide to Creating Images for a Sportswear Brand Using Multi-Pass Inferencing" title="Direct link to Step-by-Step Guide to Creating Images for a Sportswear Brand Using Multi-Pass Inferencing">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-training">Step 1: Training<a href="#step-1-training" class="hash-link" aria-label="Direct link to Step 1: Training" title="Direct link to Step 1: Training">​</a></h3><p>First, create a fine-tune of your subject.</p><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image10-6d93e8d9a2d4a97f2b8965d686d93489.png" width="959" height="845" class="img_ev3q"></p><p>Select the model type as LORA. This is a fast and efficient way to train the model, as it only trains an adapter layer on top of the base model, instead of training all the weights which is typically the case if we select the Checkpoint Model type.</p><p>We used the following images of a male model obtained from a royalty free collection (Pixabay):</p><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image4-3d68ca1fd77775a75949e0fdea948ede.jpg" width="1600" height="1600" class="img_ev3q"></p><p>Once the tune is ready, we can begin to prompt. Click on your tune.</p><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image3-fe71a43fd1042a1c53ef41ccb4493c0e.png" width="1454" height="846" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-inference">Step 2 Inference<a href="#step-2-inference" class="hash-link" aria-label="Direct link to Step 2 Inference" title="Direct link to Step 2 Inference">​</a></h3><p>Let’s first look at the structure of our prompt. Suppose you have to create images to market a sportswear brand.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">(medium shot) of a male model wearing hiking clothes and shoes, standing in a dense forest, behind him is a small waterfall.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BREAK photorealistic and highly detailed</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BREAK ohwx man wearing hiking clothes and shoes &lt;lora:960310:1.0&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The first line contains the base prompt to generate the background and the overall composition.</li><li>The second line is a common prompt that is added both to the base prompt and the person prompt, in order to avoid repetition.</li><li>The third line is the person prompt, to detail how our subject is composed in the foreground. The statement - <!-- -->&lt;<!-- -->lora:960310:1.0&gt; - is added to load the fine-tuned model of our subject.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Negative Prompt: (brand logos on t-shirt), (worst quality, greyscale), watermark, username, signature, text, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, jpeg artifacts, bad feet, extra fingers, mutated hands, poorly drawn hands, bad proportions, extra limbs, disfigured, bad anatomy, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, mutated hands, fused fingers, too many fingers, long neck</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The negative prompt is a list of prompts we want to avoid in our generated image. Anything placed in parentheses applies extra weights to that prompt.</p><p>We can add an input image if we want our generated image to follow an input template. On the ControlNet Hint dropdown menu, we can select pose, if we want to copy the pose of the subject from the input image. Select the Text2img toggle to be true, that’ll preserve the pose of the image. (recommended). If you want the semantics i.e. the looks and feels of the original image as well, then go for Img2img.</p><p>For example, let’s take this pose as our input image:</p><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image5-8fb740755774cf33efb7b8cf6deb3c60.jpg" width="1280" height="853" class="img_ev3q"></p><p>Also, keep the Inpaint Faces and Face Swap toggle on. Inpaint Faces iterates one more time over the faces of the subject to ensure that there is no distortion in the outcome, while the Face Swap option ensures that the face of our model is taken from the training images and swapped in the generated image to enhance resemblance in the final output.</p><p>Let’s look at the result of our first prompt:</p><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image8-530b7527b4bd99a570acb0179aafcb36.png" width="1600" height="1097" class="img_ev3q"></p><p>As you can see, the ControlNet has ensured that the output pose is similar to the pose of the input image.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-examples">Step 3: Examples<a href="#step-3-examples" class="hash-link" aria-label="Direct link to Step 3: Examples" title="Direct link to Step 3: Examples">​</a></h3><p>Prompt 2:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">a man at the finish line of a race on an olympic track</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BREAK sharp details</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BREAK ohwx man wearing running clothes and shoes, jubilant expression on his face&amp;lt;lora:960310:1.0&gt;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Negative: anime, cartoon, graphic, text, painting, crayon, graphite, abstract, glitch, deformed, mutated, ugly, long neck, disfigured, fused lips,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image9-4c157fa32c1049e695850306078a6fe1.png" width="1536" height="1920" class="img_ev3q"></p><p>Prompt 3:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">full body workout in a vibrant gym, action, perspective, speed, movement, ripped, push ups fit</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BREAK sharp details, realistic image, Porta 160 color, ARRI ALEXA 65</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BREAK ohwx man doing push-ups, intense look on his face &lt;lora:960310:1.0&gt;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Negative: anime, cartoon, graphic, text, painting, crayon, graphite, abstract, glitch, deformed, mutated, ugly, long neck, disfigured, fused lips,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image1-ed2246b12f83db790d137c93ec375a7d.png" width="1280" height="1600" class="img_ev3q"></p><p>Prompt 4:
(wide shot) of a man walking at night on the streets of New York, warm lighting, photorealistic</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">BREAK</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BREAK ohwx man wearing casual sports wear&amp;lt;lora:960310:1.0&gt;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Negative: hat, cartoon, ugly</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/astria-articles/assets/images/image2-ecaf6b1d065d3eb6c57c399392ee34e3.png" width="1280" height="1600" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="final-note">Final Note<a href="#final-note" class="hash-link" aria-label="Direct link to Final Note" title="Direct link to Final Note">​</a></h2><p>The above steps can be used to generate product photography or e-commerce images. With multi-pass inference, you can gain a huge amount of control over your image backgrounds vis a vis the foreground. This technique allows you to iteratively refine and tailor the background details, ensuring that they align with your vision and objectives.</p><p>Whether you're looking to create images for branding, marketing, storytelling, or artistic expression, multi-pass inference by Astria.ai provides the flexibility and precision to shape the background just as you need it. You can now harness this tool to bring depth, context, and nuance to your visual content, making your image speak in harmony with your creative goals.</p>]]></content>
    </entry>
</feed>